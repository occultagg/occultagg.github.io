<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/202206120024516.ico"><link rel="icon" href="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/202206120024516.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="Peter Pan"><meta name="keywords" content=""><meta name="description" content="概述 AI绘画是通过模拟图像增加噪点对图像进行分析学习处理后再进行重新组合降噪还原的扩散过程,称为图像扩散 原论文名: High-Resolution lmage Synthesis with Latent Diffusion Models 所以按我理解,AI绘画并不是本质上的从0到1的创造,而是模仿重组.不过模仿重组本身就不是创造了吗?  SD安装 环境  python CUDA驱动 GIT"><meta property="og:type" content="article"><meta property="og:title" content="AIGC-AI绘画"><meta property="og:url" content="http://example.com/2024/01/30/aigc-AIpainting/index.html"><meta property="og:site_name" content="Any &amp; Nothing"><meta property="og:description" content="概述 AI绘画是通过模拟图像增加噪点对图像进行分析学习处理后再进行重新组合降噪还原的扩散过程,称为图像扩散 原论文名: High-Resolution lmage Synthesis with Latent Diffusion Models 所以按我理解,AI绘画并不是本质上的从0到1的创造,而是模仿重组.不过模仿重组本身就不是创造了吗?  SD安装 环境  python CUDA驱动 GIT"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/how-does-stable-diffusion-work.webp"><meta property="article:published_time" content="2024-01-30T02:16:45.000Z"><meta property="article:modified_time" content="2024-12-11T09:52:23.054Z"><meta property="article:author" content="Peter Pan"><meta property="article:tag" content="AIGC"><meta property="article:tag" content="Stable Diffusion"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/how-does-stable-diffusion-work.webp"><meta name="referrer" content="no-referrer-when-downgrade"><title>AIGC-AI绘画 - Any &amp; Nothing</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"example.com",root:"/",version:"1.9.7",typing:{enable:!0,typeSpeed:70,cursorChar:"|",loop:!1,scope:["home"]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!0,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Any & Nothing" type="application/atom+xml">
</head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Any &amp; Nothing</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">AIGC-AI绘画</span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2024-01-30 10:16" pubdate>2024年1月30日 上午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 2.9k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 25 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">AIGC-AI绘画</h1><div class="markdown-body"><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/how-does-stable-diffusion-work.webp" srcset="/img/loading.gif" lazyload></p><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><blockquote><p>AI绘画是通过模拟图像增加噪点对图像进行分析学习处理后再进行重新组合降噪还原的扩散过程,称为<code>图像扩散</code></p><p>原论文名: High-Resolution lmage Synthesis with Latent Diffusion Models</p><p>所以按我理解,AI绘画并不是本质上的从0到1的创造,而是模仿重组.不过模仿重组本身就不是创造了吗?</p></blockquote><h1 id="SD安装"><a href="#SD安装" class="headerlink" title="SD安装"></a>SD安装</h1><ol><li><p>环境</p><ul><li>python</li><li>CUDA驱动</li><li>GIT</li></ul></li><li><p>原生webui</p><ul><li><p>python&lt;&#x3D;3.10.6</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https:/github.com/AUTOMATIC1111/stable-diffusion-webui.git<br><span class="hljs-meta prompt_"># </span><span class="language-bash">黑色主题</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">http://127.0.0.1:7860/?__theme=dark</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p>原生webui分支</p><ul><li><p>在上面的基础上做了些优化,本质功能没有差别</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://github.com/vladmandic/automatic<br><span class="hljs-meta prompt_"># </span><span class="language-bash">启动后不会自动弹出webui要手动访问</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">http://127.0.0.1:7860/</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p>大神整合包</p><ul><li>B站: 秋葉aaaki</li><li>B站: 独立研究员-星空ki (支持A卡, A卡选CPU或者自动运行)</li><li>B站: ToniiiX (支持全系列A卡,N卡,M1芯片; 支持mac, windows, linux; 没有自带模型)</li></ul></li></ol><h1 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h1><p>插件目录: <code>path_to_sd\extensions</code></p><ol><li><p>直接在插件目录下<code>git clone &#123;插件地址&#125;</code></p></li><li><p>通过webui安装</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130112645151.png" srcset="/img/loading.gif" lazyload alt="image-20240130112645151"></p></li></ol><p>原生webui内置插件:</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130113113466.png" srcset="/img/loading.gif" lazyload alt="image-20240130113113466"></p><p>常用插件推荐:</p><ul><li><a target="_blank" rel="noopener" href="https://github.com/dtlnor/stable-diffusion-webui-localization-zh_CN">简体中文语言包</a></li><li><a target="_blank" rel="noopener" href="https://github.com/Physton/sd-webui-prompt-all-in-one">提示词管理</a></li><li><a target="_blank" rel="noopener" href="https://github.com/DominikDoom/a1111-sd-webui-tagcomplete">Tag自动补全</a></li></ul><h1 id="通用参数"><a href="#通用参数" class="headerlink" title="通用参数"></a>通用参数</h1><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130152941815.png" srcset="/img/loading.gif" lazyload alt="image-20240130152941815"></p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130152932659.png" srcset="/img/loading.gif" lazyload alt="image-20240130152932659"></p><h2 id="大模型"><a href="#大模型" class="headerlink" title="大模型"></a>大模型</h2><p>模型路径: <code>path_to_sd\models\Stable-diffusion</code></p><p>作用: 决定画风</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130115404345.png" srcset="/img/loading.gif" lazyload alt="image-20240130115404345"></p><blockquote><p>SD模型又叫<code>ckpt(check point)</code>,大模型,主模型或底模型,后缀为<code>.ckpt</code>或<code>.safetensors</code></p></blockquote><p>模型下载网站:</p><ul><li><p><a target="_blank" rel="noopener" href="https://huggingface.co/">抱脸虫</a>: 基本上AI相关的模型它都有</p></li><li><p><a target="_blank" rel="noopener" href="https://civitai.com/">C站</a>(需要魔法)</p></li><li><p><del><a href="">炼丹阁</a></del>(已死)</p></li><li><p><a target="_blank" rel="noopener" href="https://www.liblib.art/">哩布哩布</a>(国产,有会员制,部分模型要钱)</p></li><li><p><a target="_blank" rel="noopener" href="https://rentry.co/sdmodels">rentry.co</a></p></li><li><p><a target="_blank" rel="noopener" href="https://cyberes.github.io/stable-diffusion-models/">cyberes</a></p></li></ul><h2 id="VAE"><a href="#VAE" class="headerlink" title="VAE"></a>VAE</h2><p><code>变分自编码器</code>,基于深度学习的生成模型</p><p>调出配置项: <code>设置--&gt;用户界面--&gt;快捷设置列表--&gt;sd_vae--&gt;保存设置--&gt;重启webui</code></p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130121027626.png" srcset="/img/loading.gif" lazyload alt="image-20240130121027626"></p><p>vae也有单独的模型, 存放目录: <code>path_to_sd\models\VAE</code>,不过目前很多大模型训练时已经自带VAE</p><p>作用: <code>滤镜与微调</code>,如下左图没有使用VAE</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130120604669.png" srcset="/img/loading.gif" lazyload></p><h2 id="CLIP-skip"><a href="#CLIP-skip" class="headerlink" title="CLIP skip"></a>CLIP skip</h2><p>一种<code>语言理解模型</code>,一共有12个值(0-12),表示理解提示词的<code>模糊程度</code>,层越低,越贴切提示词(越严谨).</p><blockquote><p>一般调到2-4,如果希望sd更自主,可以相应调高</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130152014888.png" srcset="/img/loading.gif" lazyload alt="image-20240130152014888"></p><p>调出配置项: <code>设置--&gt;用户界面--&gt;快捷设置列表--&gt;CLIP_stop_at_last_layers--&gt;保存设置--&gt;重启webui</code></p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130151606339.png" srcset="/img/loading.gif" lazyload alt="image-20240130151606339"></p><h2 id="采样方法-sampler"><a href="#采样方法-sampler" class="headerlink" title="采样方法 sampler"></a>采样方法 sampler</h2><p>不同的<code>采样器</code>影响图片的扩散过程以及色彩.一般模型训练者会提示采用哪种采样器会比较好.</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130152411129.png" srcset="/img/loading.gif" lazyload alt="image-20240130152411129"></p><p>常用的采样器:</p><ul><li>Euler a</li><li>Eular</li><li>DPM2</li><li>DDIM</li><li>DPM++ 2M Karras</li></ul><h2 id="迭代步数-steps"><a href="#迭代步数-steps" class="headerlink" title="迭代步数 steps"></a>迭代步数 steps</h2><p>就是图像扩散的步数,可以理解为ai绘画的笔数.迭代步数一般要根据使用的采样器决定.并不是步数越高就越精细.</p><p>一般情况下可以设置到<code>20-50</code></p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130152607126.png" srcset="/img/loading.gif" lazyload alt="image-20240130152607126"></p><h2 id="提示词相关性-CFG-Scale"><a href="#提示词相关性-CFG-Scale" class="headerlink" title="提示词相关性 CFG Scale"></a>提示词相关性 CFG Scale</h2><p>影响提示词的<code>权重</code>: 不同于提示词语法权重,而是<code>整个图片扩散过程提示词与其他参数占比的总权重</code></p><p>安全值: 7-15</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130153036894.png" srcset="/img/loading.gif" lazyload alt="image-20240130153036894"></p><h2 id="面部修复"><a href="#面部修复" class="headerlink" title="面部修复"></a>面部修复</h2><blockquote><p>新版本sd webui默认打开</p></blockquote><p>可以在设置中关闭</p><p>因为人物像中最复杂的就是<code>脸</code>和<code>手</code>,如果分辨率不高,像素太小,AI画出的人物脸部和手部就很容易崩坏.如果调高分辨率也有修复的效果.</p><p>但是绝大多数模型在训练的时候都是采用512*512去训练,如果用高分辨率来生成,空的部分AI会随意填充,比如你想画1 girl,它就给你2 girl.</p><p>这时候只能生成512*512的图,但是又要高分辨率,此时就可以用到<code>高清修复</code>.</p><h2 id="高清修复-Hires-fix"><a href="#高清修复-Hires-fix" class="headerlink" title="高清修复 Hires. fix"></a>高清修复 Hires. fix</h2><p>高清修复有各种对图片放大重绘的算法,实际上是<code>图片重绘</code>生成更大更多细节的图片.</p><h2 id="平铺"><a href="#平铺" class="headerlink" title="平铺"></a>平铺</h2><p>生成的图可以无缝拼合使用(材质图)</p><h2 id="随机种子-seed"><a href="#随机种子-seed" class="headerlink" title="随机种子 seed"></a>随机种子 seed</h2><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130154534705.png" srcset="/img/loading.gif" lazyload alt="image-20240130154534705"></p><p>种子就是噪声,<code>每一个种子表示不同的噪声图</code>.</p><p>种子数&#x3D;1;迭代&#x3D;1就是<code>原始噪声图</code>.</p><p>最大种子数: 18446744073709550591 (超过就会生成失败)</p><p>使用上一次的随机种子数: 使用上一次的随机种子,<code>后面生成的图都会参考上一次的图来画</code>.</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130154408764.png" srcset="/img/loading.gif" lazyload alt="image-20240130154408764"></p><p><code>-1</code>: 不使用特定的随机种子,出图完全随机.</p><h3 id="高级功能-对噪声图重新组合"><a href="#高级功能-对噪声图重新组合" class="headerlink" title="高级功能: 对噪声图重新组合"></a>高级功能: 对噪声图重新组合</h3><ul><li><p>差异随机种子 和 差异强度: <code>差异种子</code>与<code>随机种子</code>差值越大,构图影响越大,同时变化幅度由<code>差异强度</code>决定</p><p>固定参数:</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130160833686.png" srcset="/img/loading.gif" lazyload alt="image-20240130160833686"></p><p>​	只调节差异种子和差异强度输出如下:</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130160552517.png" srcset="/img/loading.gif" lazyload alt="image-20240130160552517"></p><p>随机种子&#x3D;差异种子时: 不论差异强度多高,图片都不会变化</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130161427262.png" srcset="/img/loading.gif" lazyload alt="image-20240130161427262"></p><ul><li>宽度和高度: 比如设置300*300,差异种子控制的就是差异种子内的噪声,也就是300*300里面的部分</li></ul><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130160329540.png" srcset="/img/loading.gif" lazyload alt="image-20240130160329540"></p><p>总结: 当我们得到一张基本符合要求的图,但是对细节有其他想法,就可以调差异种子.通过差异种子,可以对噪声图进行局部重绘,从而会图差生细微影响.在不影响整体构图下,细改图片.(其实类似局部重绘)</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130161827600.png" srcset="/img/loading.gif" lazyload alt="image-20240130161827600"></p><h1 id="文生图"><a href="#文生图" class="headerlink" title="文生图"></a>文生图</h1><p>text2img原理:</p><p>提示词+参数&#x3D;&#x3D;&gt;代码&#x3D;&#x3D;&gt;采样器sampler&#x3D;&#x3D;&gt;采样方法sampling method&#x3D;&#x3D;&gt;对底模ckpt进行采样&#x3D;&#x3D;&gt;图像</p><h2 id="正向提示词"><a href="#正向提示词" class="headerlink" title="正向提示词"></a>正向提示词</h2><p>可以识别:</p><ul><li>英文:<ul><li>单词: 一个女孩,高挑,站立,地面 (由于sd对于单词理解能力更强,所以<code>优先使用</code>)</li><li>短句: 一个站立在地面上的高挑女孩</li></ul></li><li>数字</li><li>符号</li><li>emoji表情</li></ul><p>语序: 画面质量–&gt;主要元素–&gt;细节</p><ol><li>画面质量&#x2F;概念:<ul><li>图像质量: 高细节, 高分辨率, 超写实主义, HD, 8k, 16K等</li><li>风格: 卡通, 贴纸, 漫画, 印象, 肖像, 像素, 新海城, 赛博朋克等</li><li>构图: 中心, 水平, 随直, 三分法, 对称法, 对角线, 框架, 重复构图等</li><li>灯关: 工作室, 电影照明, 美丽的灯光, 柔光, 逆光, 人物发光, 测光, 云隙光等</li></ul></li><li>主要元素&#x2F;主体:<ul><li>人物: 武士, 护士, 魔法师, 美少女战士, 男人, 女人, 女孩, 男孩, 兔女郎, 特定人物等</li><li>动物: 猴子, 鸡, 狗, 兔, 十二生肖, 怪兽, 鱼, 老鼠, 鸟, 鸭, 鹅等</li><li>事物: 瓶子, 伞, 武器, 背包, 墨镜, 手机, 电脑, 工具等</li><li>风景: 天空, 森林, 海洋, 山, 水, 花, 道路桥梁等</li><li>姿态: 站立, 坐, 行走, 奔跑, 跳跃, 半蹲, 抬头, 回身, 侧卧, 手放身后, 二郎腿等</li><li>服装: 短袖, 长衫, 连衣裙, 长袍, 短裤, 丝袜, 手套, 吊带, 牛仔裤, 围巾, 高跟鞋等</li><li>道具: 帽子, 眼镜, 武器, 手链, 项链, 耳坠, 耳环等</li></ul></li><li>细节:<ul><li>场景: 室内, 室外, 客厅, 餐厅, 咖啡店, 酒吧, 幻想场景等</li><li>环境: 晴天, 雨天, 阴天, 春夏秋冬, 白天, 傍晚, 夜晚等</li><li>细小元素: 表情, 妆容, 发髻, 雷, 电, 水, 火等不影响整体构图的元素</li><li>其他</li></ul></li></ol><h2 id="符号"><a href="#符号" class="headerlink" title="符号"></a>符号</h2><p>分隔符: <code>权重排序</code>, 分隔符<code>前</code>权重<code>高</code>, 分隔符<code>后</code>权重<code>低</code>.一般情况下都使用<code>,</code>和<code>换行</code>.</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130164715309.png" srcset="/img/loading.gif" lazyload alt="image-20240130164715309"></p><h3 id="权重符号"><a href="#权重符号" class="headerlink" title="权重符号"></a>权重符号</h3><p><code>(提示词)</code>: 括号内提示词权重* <code>1.1</code></p><p><code>&#123;提示词&#125;</code>: 括号内提示词权重* <code>1.05</code></p><p><code>[提示词]</code>: 括号内提示词权重* <code>0.9</code></p><p><code>(提示词:1.2)</code>: 自定义权重</p><p>可以叠加使用:</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130165101987.png" srcset="/img/loading.gif" lazyload alt="image-20240130165101987"></p><p>实际使用:</p><p>当我们希望某个元素在图片中出现更多,就可以<code>调高权重</code>,但是权重超过<code>1.5</code>图片同意崩,所以一般不要超过1.5</p><h3 id="连接符号"><a href="#连接符号" class="headerlink" title="连接符号"></a>连接符号</h3><p><code>+</code>和<code>_</code>: 并列前后提示词的权重</p><p><code>提示词1|提示词2</code>: <code>循环</code>竖线前后提示词的影响扩散效果(迭代步数1,3,5…<code>提示词1</code>生效; 迭代步数2,4,6…<code>提示词2</code>生效)</p><p><code>AND</code>: 前后需要加上空格, 对前后提示词产生融合效果</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130165639713.png" srcset="/img/loading.gif" lazyload alt="image-20240130165639713"></p><h3 id="分布扩散符号"><a href="#分布扩散符号" class="headerlink" title="分布扩散符号"></a>分布扩散符号</h3><p><code>[提示词:步数]</code>: 指定步数开始生效</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130165804776.png" srcset="/img/loading.gif" lazyload alt="image-20240130165804776"></p><p><code>[提示词::步数]</code>:指定步数停止生效</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130165854461.png" srcset="/img/loading.gif" lazyload alt="image-20240130165854461"></p><p><code>[提示词1:提示词2:步数]</code>:可以同时控制两个提示词, 指定步数<code>前</code>提示词<code>1</code>生效, 指定步数<code>后</code>提示词<code>2</code>生效</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130170152432.png" srcset="/img/loading.gif" lazyload alt="image-20240130170152432"></p><p><code>[提示词1|提示词2]</code>: 循环影响</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130170014173.png" srcset="/img/loading.gif" lazyload alt="image-20240130170014173"></p><p>示例:</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130170353337.png" srcset="/img/loading.gif" lazyload alt="image-20240130170353337"></p><h2 id="反向提示词"><a href="#反向提示词" class="headerlink" title="反向提示词"></a>反向提示词</h2><p>通用模板保存即可(正向亦可保存).</p><p>模板保存目录: <code>path_to_sd\styles.csv</code>,用<code>记事本</code>打开,删除要删除的内容保存即可,不能用excel打开,否则会报错</p><h1 id="图生图"><a href="#图生图" class="headerlink" title="图生图"></a>图生图</h1><p>img2img: 通过提供的图像产生一个新图像</p><p>原理:</p><p>SD将输入的源图(step1)隐藏再随机种子的噪点图后(step2),基于这个<code>原始噪声图</code>再扩散.所以源图的颜色构图等总会在后面的迭代中出现.</p><blockquote><p>所以SD不是理解了源图,而是通过源图也随机种子组合<code>原始噪声图</code>再加上提示词和参数结合底模,找到最匹配的元素扩散出结果</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130174924201.png" srcset="/img/loading.gif" lazyload alt="image-20240130174924201"></p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130175058678.png" srcset="/img/loading.gif" lazyload alt="image-20240130175058678"></p><h2 id="重绘幅度"><a href="#重绘幅度" class="headerlink" title="重绘幅度"></a>重绘幅度</h2><p>表示添加到输出图像的噪声量,幅度值越大,图像变化越多</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130180047734.png" srcset="/img/loading.gif" lazyload alt="image-20240130180047734"></p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130180140468.png" srcset="/img/loading.gif" lazyload alt="image-20240130180140468"></p><h2 id="局部重绘"><a href="#局部重绘" class="headerlink" title="局部重绘"></a>局部重绘</h2><p>通过手涂蒙版工具对源图.结合提示词和参数,进行局部的图生图处理.</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130180657074.png" srcset="/img/loading.gif" lazyload alt="image-20240130180657074"></p><p>模板边缘模糊度: 重绘边缘羽化功能,使局部生成部分看上去与源图更贴合.但是SD本身不会理解局部重绘部分与原图的关系,要想真正切合,需要使用插件.</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130181011969.png" srcset="/img/loading.gif" lazyload alt="image-20240130181011969"></p><h2 id="涂鸦"><a href="#涂鸦" class="headerlink" title="涂鸦"></a>涂鸦</h2><p>对原图上色重绘,同样可以根据提示词引导噪声图.</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130181059469.png" srcset="/img/loading.gif" lazyload alt="image-20240130181059469"></p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130181119420.png" srcset="/img/loading.gif" lazyload alt="image-20240130181119420"></p><h2 id="涂鸦重绘"><a href="#涂鸦重绘" class="headerlink" title="涂鸦重绘"></a>涂鸦重绘</h2><p>涂鸦+重绘, 在不改变原图的基础下,对原图进行涂鸦输入,也可以通过调整<code>蒙版透明度</code>改颜色.</p><h2 id="上传蒙版"><a href="#上传蒙版" class="headerlink" title="上传蒙版"></a>上传蒙版</h2><p>通过其他工具生成更加匹配的蒙版,更加精确地控制重绘的区域.(白色才是蒙版区域)</p><h2 id="批量重绘"><a href="#批量重绘" class="headerlink" title="批量重绘"></a>批量重绘</h2><p>通过预设,批量使用重绘功能.电商必备</p><p>需要提前准备好:</p><ul><li>原图目录</li><li>蒙版目录</li><li>输出目录</li><li>controlNet插件图像目录</li></ul><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130181709026.png" srcset="/img/loading.gif" lazyload alt="image-20240130181709026"></p><h2 id="缩放模式"><a href="#缩放模式" class="headerlink" title="缩放模式"></a>缩放模式</h2><blockquote><p>文生图第一步是预处理噪声图</p><p>图生图第一步是预处理原图</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130191518665.png" srcset="/img/loading.gif" lazyload alt="image-20240130191518665"></p><p>潜空间: 预处理时噪声图(图生图中原图在随机噪声后融合后产生的<code>原始噪声图</code>)背后的空间.</p><p>仅调整大小(潜空间放大): 进入潜空间前先调整大小再<code>预处理</code>,进入潜空间后再静态放大.所以潜空间放大的原图会出现模糊.</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130192059583.png" srcset="/img/loading.gif" lazyload alt="image-20240130192059583"></p><h2 id="重绘参考内容"><a href="#重绘参考内容" class="headerlink" title="重绘参考内容"></a>重绘参考内容</h2><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130192426424.png" srcset="/img/loading.gif" lazyload alt="image-20240130192426424"></p><p>填充: 对重绘区域的原图进行高度模糊处理,只保留原图色度,再隐藏到随机噪声图后面.<code>原图颜色+随机噪声图(保留原图颜色,不保留原图结构)</code></p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130192547944.png" srcset="/img/loading.gif" lazyload alt="image-20240130192547944"></p><p>原图: 不改变原图的预处理方式,之间将原图隐藏在随机噪声图后.<code>原图颜色结构+随机噪声图</code></p><p>潜空间噪声: 在重回区域填充潜空间内容(也是一张噪声图),然后再预处理叠加随机噪声图,也就是<code>双层噪声图</code></p><p>空白潜空间: 不使用潜空间的内容,直接在重绘区域填充噪声图.<code>单层噪声图</code></p><h2 id="重绘区域"><a href="#重绘区域" class="headerlink" title="重绘区域"></a>重绘区域</h2><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130193117521.png" srcset="/img/loading.gif" lazyload alt="image-20240130193117521"></p><p>整张重绘&#x2F;以原图尺寸重绘: 对整张图片使用预处理方式,扩散局部内容</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130193401632.png" srcset="/img/loading.gif" lazyload alt="image-20240130193401632"></p><p>仅模板区域: 只对重绘区域进行预处理</p><p><img src="https://cdn.jsdelivr.net/gh/occultagg/blog-pics/hexo-blog/image-20240130193341293.png" srcset="/img/loading.gif" lazyload alt="image-20240130193341293"></p><p>以蒙版尺寸重绘时的外部填充半径(像素):</p><p>控制填入噪点的像素大小,值越低,重绘部分像素越多.</p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/AIGC/" class="category-chain-item">AIGC</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/AIGC/" class="print-no-link">#AIGC</a> <a href="/tags/Stable-Diffusion/" class="print-no-link">#Stable Diffusion</a></div></div><div class="license-box my-3"><div class="license-title"><div>AIGC-AI绘画</div><div>http://example.com/2024/01/30/aigc-AIpainting/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Peter Pan</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2024年1月30日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2024/01/31/terraform-must-know/" title="terraform-必知必会"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">terraform-必知必会</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2024/01/16/python-oop/" title="python笔记-面向对象编程"><span class="hidden-mobile">python笔记-面向对象编程</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>